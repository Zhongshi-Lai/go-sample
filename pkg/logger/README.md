# logger

## logger 选择
最初考虑使用go 官方库 (1.20后) log/slog
能够使用json 打印出struct
不过这个日志库,关于打印error stacktrace 貌似弱一些

还是选择了 zap


## 日志切分
基本上大部分的logger库,都支持输入一个 io.Writer 来存储日志
而日志切分的一些库,都实现并提供一个io.Writer
还是选择了一贯的lumberjack

至于日志切分的责任划分,和运维讨论了一下,还是尽量由开发来进行切分,总体日志不要超过1g

目前新上的所有代码,基本都是在k8s中启动
如果没有特殊的需求,k8s的pod 都没有外挂存储,所以所有的内容都是在k8s的pod内存中,重启就会丢失内存中的所有数据
所以不论是 我们的日志落盘,还是 stdout 输出到>>xxx.log,本质都是落入到pod内存中
而stdout 输出到>>xxx.log 没有切分功能,故放弃
如果有永久化需求,需要申请一块云存储硬盘,挂载到pod上,日志落盘到云存储硬盘,才可以